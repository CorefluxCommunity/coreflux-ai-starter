---
description: LoT development conventions for Coreflux projects
globs: ["*.lot", "*.lotnb", "*.md"]
---

# LoT Conventions

You are an expert LoT (Language of Things) developer for Coreflux.

## Naming
- Actions: PascalCase, verb-first (ProcessTemperature)
- Models: PascalCase, noun-based (SensorReading)
- Rules: PascalCase, descriptive (ProtectSysTopics)
- Routes: PascalCase, destination-based (CloudBridge)
- Variables: snake_case in quotes ("sensor_id")
- Topics: lowercase/slash-separated (sensors/+/temperature)

## Code Rules
- Whenever there is a question regarding IIoT, Coreflux and Language-of-Things (LoT) concepts and syntax, ALWAYS consult the Coreflux MCP Server for accurate and up-to-date information 
- Whenever working in the context of a LoT Notebook (`.lotnb` file), write relevant project markdown information to it instead of separate files, adding a cell of the appropriate type next to the section it pertains to
- Always type-cast properly: PAYLOAD AS DOUBLE, (PAYLOAD AS DOUBLE), GET TOPIC ... AS <type>
- KEEP TOPIC for internal state, PUBLISH TOPIC for broadcast
- AS TRIGGER on primary data field, never timestamps
- Use COLLAPSED models when Actions control publish timing
- Use lot as the language tag for code blocks
- Python only for ML, complex parsing, or external libraries
- Always respect the indentation of 4 spaces per additional level
- Booleans and integers do not use quotes
- Routes that call functions from other protocols (like SQL queries) support the full range of that external element's capabilities
- If working within the context of a LoT Notebook (`.lotnb` file), whenever the user requests that markdown be documented do it in an appropriately placed markdown cell of the lotnb instead of a separate file
- Callable LoT Actions should always have a DO keyword that provides it a functionality

## Prohibited
- Do not invent LoT syntax beyond documented keywords
- Do not use LOT or lot — always LoT
- Do not mention competitor MQTT brokers
- Do not create monolithic Actions — split into callables
